<app-header-general></app-header-general>
<div class="container">
  <div class="image-container"></div>
  <div class="form-container">
    <h1>ğŸ…¿ EASY PARK</h1>


    <div *ngIf="registerSuccess" class="alert alert-success d-flex align-items-center" role="alert">
      <i class="bi bi-check-circle-fill me-2"></i>
      <div>Registro exitoso, redirigiendo...</div>
    </div>


    <div *ngIf="registerError" class="alert alert-danger d-flex align-items-center" role="alert">
      <i class="bi bi-exclamation-triangle-fill me-2"></i>
      <div>Correo o contraseÃ±a incorrectos.</div>
    </div>

    <div *ngIf="register.invalid && register.touched" class="alert alert-warning d-flex align-items-center"
      role="alert">
      <i class="bi bi-exclamation-circle-fill me-2"></i>
      <div>Por favor, complete todos los campos.</div>
    </div>


    <form [formGroup]="register" (ngSubmit)="handleSubmit()">
      <label for="full_name">Nombre Completo</label>
      <input type="text" id="full_name" placeholder="Ingrese su nombre" formControlName="full_name">
      <div *ngIf="register.get('full_name')?.invalid && register.get('full_name')?.touched" class="error">
        <span *ngIf="register.get('full_name')?.errors?.['required']">âš  El nombre es obligatorio. *</span>
      </div>

      <label for="email">Correo ElectrÃ³nico</label>
      <input type="email" id="email" placeholder="Ingrese su correo" formControlName="email">
      <div *ngIf="register.get('email')?.invalid && register.get('email')?.touched" class="error">
        <span *ngIf="register.get('email')?.errors?.['required']">âš  El correo es obligatorio. *</span>
        <span *ngIf="register.get('email')?.errors?.['email'] || register.get('email')?.errors?.['pattern']">Ingrese un
          correo vÃ¡lido (ejemplo&#64;dominio.com).</span>
      </div>

      <!-- Alerta si el correo pertenece a un administrador -->
      <div *ngIf="adminEmailError" class="alert alert-warning d-flex align-items-center" role="alert">
        <i class="bi bi-exclamation-circle-fill me-2"></i>
        <div>El correo ingresado pertenece a un administrador.</div>
      </div>
      <!-- Alerta si el correo ya estÃ¡ registrado en Users -->
      <div *ngIf="emailTakenError" class="alert alert-warning d-flex align-items-center" role="alert">
        <i class="bi bi-exclamation-circle-fill me-2"></i>
        <div>El correo ya estÃ¡ registrado. Intente con otro.</div>
Â Â Â Â Â Â </div>

      <label for="telefono">TelÃ©fono</label>
      <input type="text" id="telefono" placeholder="Ingrese su telÃ©fono" formControlName="telefono">
      <div *ngIf="register.get('telefono')?.invalid && register.get('telefono')?.touched" class="error">
        <span *ngIf="register.get('telefono')?.errors?.['required']">âš  El telÃ©fono es obligatorio. *</span>
        <span *ngIf="register.get('telefono')?.errors?.['pattern']">âš  El telÃ©fono debe contener solo nÃºmeros y mÃ¡ximo 10
          dÃ­gitos. *</span>
      </div>

      <label for="password">ContraseÃ±a</label>
      <input type="password" id="password" placeholder="Ingrese su contraseÃ±a" formControlName="password">
      <div *ngIf="register.get('password')?.invalid && register.get('password')?.touched" class="error">
        <span *ngIf="register.get('password')?.errors?.['required']">âš  La contraseÃ±a es obligatoria.</span>
      </div>

      <label for="confirmPassword">ConfirmaciÃ³n de contraseÃ±a</label>
      <input type="password" id="confirmPassword" placeholder="Ingrese nuevamente su contraseÃ±a"
        formControlName="confirmPassword">
      <div *ngIf="register.get('confirmPassword')?.invalid && register.get('confirmPassword')?.touched" class="error">
        <span *ngIf="register.get('confirmPassword')?.errors?.['required']"> âš  La confirmaciÃ³n de contraseÃ±a es
          obligatoria. *</span>
      </div>

      <!-- Mensaje de error si las contraseÃ±as no coinciden -->
      <div *ngIf="register.errors?.['passwordMismatch'] && register.touched" class="error">
        <span> âš  Las contraseÃ±as no coinciden. *</span>
      </div>

      <button type="submit">Registrarse</button>

      <a [routerLink]="'/login'">Â¿Ya tienes una cuenta? Inicia sesiÃ³n</a>
    </form>
  </div>
</div>